<html>
<head>
<meta charset="utf-8">
<title>Vignette SlideShow</title>
<script type="text/javascript" src="../../3rdparty/soundmanager2-nodebug-jsmin.js"></script>
<script type="text/javascript" src="../../wgeCore.js"></script>
<script type="text/javascript" src="../../wgeAlgorithm.js"></script>
<script type="text/javascript" src="../../wgeGUI.js"></script>
<script type="text/javascript" src="../wgeFilters.js"></script>
<script type="text/javascript" src="../wgeSprite.js"></script>
<script type="text/javascript" src="../wgeSlideshow.js"></script>
<script type="text/javascript" src="../../wgeAnimation.js"></script>
<script type="text/javascript" src="../../extends/wgeExtendActions.js"></script>
<script type="text/javascript" src="../../extends/wgeExtendFunctions.js"></script>
<script type="text/javascript" src="Vignette.js"></script>
</head>
<body >
<script type="text/javascript">


var div = WGE.CE("div");
div.setAttribute("style", "width:" + WGE.SlideshowSettings.width + "px;height:" + WGE.SlideshowSettings.height + "px; border: solid");
div.id = "demoContent";
document.body.appendChild(div);

//加载所需资源图片。
var imageArr = [];

for(var i = 0; i != 16; ++i)
	imageArr.push("../../res/comic" + i + ".jpg");

var len = imageArr.length;


var vignetteSlideShow = new WGE.Vignette(
		div, 
		imageArr, 
		//加载完所有图片回调
		loadAllDown,
		//加载完一张图片回调
		function(img, n)
		{
			vignetteSlideShow.context.font = "32px Aria";
			vignetteSlideShow.context.clearRect(0, 0, vignetteSlideShow.canvas.width, vignetteSlideShow.canvas.height);
			vignetteSlideShow.context.fillText("加载图片: 第" + n + "张，共" + len + "张", 10, vignetteSlideShow.canvas.height / 2);
		},
		1,
		1+WGE.bounceRange.range*2/WGE.SlideshowSettings.height
	);




function loadAllDown(imgArr)
{
	//
	vignetteSlideShow.context.font = "50px Aria";
	vignetteSlideShow.context.fillStyle = "#0f0";
	vignetteSlideShow.context.clearRect(0, 0, vignetteSlideShow.canvas.width, vignetteSlideShow.canvas.height);
	vignetteSlideShow.context.fillText("图片加载完毕，初始场景...", 10, vignetteSlideShow.canvas.height / 2);
	vignetteSlideShow.play();

}




</script>
</body>
</html>